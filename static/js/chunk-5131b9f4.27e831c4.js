(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5131b9f4"],{"0693":function(t,e,n){},"11ba":function(t,e,n){},"27d3":function(t,e,n){"use strict";n("11ba")},"29e9":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",[n("span",[t._v(t._s(t.title))])])},i=[],s={props:{title:{type:String,default:""}}},r=s,a=(n("65fa"),n("5d22")),c=Object(a["a"])(r,o,i,!1,null,"1727a15b",null);e["a"]=c.exports},"30c0":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"tv_chart_container"}})},i=[],s=n("60b5"),r=n("6abc"),a=(n("6a61"),n("e18c"),n("b4fb"),n("053b"),n("b130"),n("52c1")),c=n("b40e"),u=n("8943"),h={components:{},props:{tokenInfo:{type:Object,require:!0},pairInfo:{type:Object,require:!0},chartType:{type:String,require:!0,default:"pair"}},data:function(){var t=this;return{symbol:"",pairId:"",lineChartData:[],address:"",interval:"1min",widget:null,datafeed:new u["DataFeed"]({getBars:function(e){return t.getBars(e)},fetchResolveSymbol:function(){return t.resolveSymbol()},fetchConfiguration:function(){return new Promise((function(t){t({supported_resolutions:c["e"]})}))}})}},computed:Object(r["a"])({},Object(a["b"])(["isConnect","account","isPc","language","platformInfo"])),created:function(){var t=this.$route.params.address;this.address=t;var e="";"token"===this.chartType?e=this.tokenInfo.symbol:"pair"===this.chartType&&(e="".concat(this.pairInfo.token_info1.symbol,"/").concat(this.pairInfo.token_info2.symbol)),this.symbol=e},mounted:function(){this.initTradingView()},beforeDestroy:function(){this.ws&&(console.log("beforeDestroy"),this.ws.close())},methods:{resolveSymbol:function(){var t=this;return new Promise((function(e){e({name:t.symbol.toLocaleUpperCase(),full_name:t.symbol.toLocaleUpperCase(),description:t.symbol.toLocaleUpperCase(),type:t.symbol,session:"24x7",exchange:t.platformInfo.name,listed_exchange:t.symbol,timezone:"Asia/Shanghai",format:"price",pricescale:Math.pow(10,4),minmov:1,volume_precision:8,has_intraday:!0,supported_resolutions:c["e"]})}))},getBars:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var o,i,s,a,u,h,l,d,p,_;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.firstDataRequest){n.next=2;break}return n.abrupt("return",{bars:[],meta:{noData:!0}});case 2:if(t.resolution!==c["d"][e.interval])for(o in e.unsubscribeKLine(),c["d"])c["d"][o]===t.resolution&&(e.interval=o);return i={req:"market.kline.".concat(e.interval),from:Math.round((new Date).getTime()/1e3)-50*c["c"][e.interval].time,to:Math.round((new Date).getTime()/1e3)},s={},s="token"===e.chartType?{address:e.address}:{id:e.pairInfo.id},n.next=8,e.$api.getKlineList(Object(r["a"])(Object(r["a"])({},i),s));case 8:if(a=n.sent,e.pairId=a.id,a&&a.data&&a.data.length){n.next=12;break}return n.abrupt("return",{bars:[],meta:{noData:!0}});case 12:u=[],h=JSON.parse(JSON.stringify(a.data)),l=[];while(h.length>1)d={id:h[0].id+c["c"][e.interval].time,high:+h[0].close,low:+h[0].close,close:+h[0].close,open:+h[0].close,vol:0},h[0].id+c["c"][e.interval].time!==h[1].id?(h.shift(),h.unshift(d),l.push(d)):(h.shift(),l.push(h[0]));for(p=0;p<l.length;p++)_=l[p],u.push({time:1e3*_.id,high:+_.high,low:+_.low,close:+_.close,open:0===p?+_.open:l[p-1].close,volume:+_.vol});return u.sort((function(t,e){return t.time>e.time?1:-1})),e.lineChartData=u,t.resolution===c["d"][e.interval]&&t.firstDataRequest&&a&&a.data.length&&e.subscribeKLine(),n.abrupt("return",{bars:u,meta:{noData:!u.length}});case 21:case"end":return n.stop()}}),n)})))()},wsSend:function(t){this.ws.send(JSON.stringify(t))},subscribeKLine:function(){var t=this,e=["1min","30min","1hour"];e.includes(this.interval)?(console.log("onConnectWebSocket"),this.ws=new WebSocket(this.$utils.getWsUrl()),this.ws.onopen=function(){t.wsSend({sub:"market.kline.".concat(t.interval),id:t.pairId})},this.ws.onmessage=function(e){var n=JSON.parse(e.data);if(console.log("ws new",n),n.ch){var o={time:1e3*n.tick.id,high:+n.tick.high,low:+n.tick.low,close:+n.tick.close,open:t.lineChartData[t.lineChartData.length-1].close,volume:+n.tick.vol};console.log(o,"newItem"),t.lineChartData.push(o),t.datafeed.updateKLine(o)}},this.ws.onclose=function(){console.log("token ws closed")}):console.log("".concat(this.interval,"不支持订阅"))},unsubscribeKLine:function(){this.wsSend({unsub:"market.kline.".concat(this.interval),id:this.pairId})},initTradingView:function(){this.widget=new u["widget"]({symbol:this.symbol,interval:c["d"][this.interval],container_id:"tv_chart_container",datafeed:this.datafeed,library_path:"/charting_library/",locale:"en",theme:"Dark",timezone:"Asia/Shanghai"})}}},l=h,d=(n("a882"),n("5d22")),p=Object(d["a"])(l,o,i,!1,null,null,null);e["a"]=p.exports},"5da7":function(t,e,n){},"65fa":function(t,e,n){"use strict";n("0693")},"781b":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loadingBox"},[n("div",{staticClass:"loading"},[n("div"),n("div"),n("div"),n("div")])])}],s=n("6abc"),r=n("52c1"),a={components:{},data:function(){return{}},computed:Object(s["a"])({},Object(r["b"])(["isConnect","account","isPc","language"])),created:function(){},mounted:function(){},methods:{}},c=a,u=(n("27d3"),n("5d22")),h=Object(u["a"])(c,o,i,!1,null,"298ae9f9",null);e["a"]=h.exports},8943:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataFeed=e.version=e.widget=void 0;var o=n("9ce6");Object.defineProperty(e,"widget",{enumerable:!0,get:function(){return o.widget}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return o.version}});var i=function(){function t(t){void 0===t&&(t={}),this.configuration={},this.subscribers={},this.requesting=!1,this.options=t}return t.prototype.onReady=function(t){var e=this;new Promise((function(t){t(void 0)})).then((function(){var n=e.options.fetchConfiguration;e.configuration=e.defaultConfiguration(),n?n().then((function(n){e.configuration=Object.assign(e.configuration,n),t(e.configuration)})):t(e.configuration)}))},t.prototype.searchSymbols=function(t,e,n,o){var i=this.options.fetchSearchSymbols;i&&i({userInput:t,exchange:e,symbolType:n}).then(o).catch((function(){o([])}))},t.prototype.resolveSymbol=function(t,e,n){var o=this.options.fetchResolveSymbol;o&&o(t).then(e).catch((function(){n("Error fetchResolveSymbol")}))},t.prototype.getBars=function(t,e,n,o,i,s,r){var a=this,c=this.options.getBars;c&&(this.requesting||(this.requesting=!0,c({symbolInfo:t,resolution:e,from:n,to:o,firstDataRequest:r}).then((function(t){a.requesting=!1,i(t.bars,t.meta)})).catch((function(){a.requesting=!1,s("Error getBars")}))))},t.prototype.subscribeBars=function(t,e,n,o,i){this.subscribers[o]||(this.subscribers[o]={lastBarTime:null,listener:n,resolution:e,symbolInfo:t})},t.prototype.unsubscribeBars=function(t){this.subscribers[t]&&delete this.subscribers[t]},t.prototype.updateKLine=function(t){for(var e in this.subscribers){var n=this.subscribers[e];null!==n.lastBarTime&&t.time<n.lastBarTime||(n.lastBarTime=t.time,n.listener(t))}},t.prototype.calculateHistoryDepth=function(t,e,n){var o=this.options.calculateHistoryDepth;if(o)return o(t,e,n)},t.prototype.getMarks=function(t,e,n,o,i){var s=this.options.getMarks;s&&s({symbolInfo:t,startDate:e,endDate:n,resolution:i}).then(o)},t.prototype.getTimescaleMarks=function(t,e,n,o,i){var s=this.options.getTimescaleMarks,r=this.configuration.supports_timescale_marks;s&&r&&s({symbolInfo:t,startDate:e,endDate:n,resolution:i}).then(o)},t.prototype.getServerTime=function(t){var e=this.options.getServerTime,n=this.configuration.supports_time;e&&n&&e().then(t)},t.prototype.defaultConfiguration=function(){return{supported_resolutions:["1","5","15","30","60","1D","1W","1M"],supports_marks:!1,supports_timescale_marks:!1}},t}();e.DataFeed=i},"9ce6":function(t,e,n){!function(t,n){n(e)}(0,(function(t){"use strict";var e=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function n(t,o){var i=e({},t);for(var s in o)"object"!=typeof t[s]||null===t[s]||Array.isArray(t[s])?void 0!==o[s]&&(i[s]=o[s]):i[s]=n(t[s],o[s]);return i}var o={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},i={width:800,height:500,symbol:"AA",interval:"D",timezone:"Etc/UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"W"},{text:"1y",resolution:"W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}};function s(){return"1.15 dev (internal id c63b141f @ 2019-10-31 04:30:54.420652)"}var r=function(){function t(t){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!t.datafeed)throw new Error("Datafeed is not defined");if(this._options=n(i,t),t.preset){var e=o[t.preset];e?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(e.disabled_features):this._options.disabled_features=e.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(e.enabled_features):this._options.enabled_features=e.enabled_features):console.warn("Unknown preset: `"+t.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._create()}return t.prototype.onChartReady=function(t){this._ready?t.call(this):this._readyHandlers.push(t)},t.prototype.headerReady=function(){var t=this;return this._innerWindowLoaded.then((function(){return t._innerWindow().headerReady()}))},t.prototype.onGrayedObjectClicked=function(t){this._innerAPI().onGrayedObjectClicked(t)},t.prototype.onShortcut=function(t,e){this._innerWindow().createShortcutAction(t,e)},t.prototype.subscribe=function(t,e){this._innerAPI().subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._innerAPI().unsubscribe(t,e)},t.prototype.chart=function(t){return this._innerAPI().chart(t)},t.prototype.setLanguage=function(t){this.remove(),this._options.locale=t,this._create()},t.prototype.setSymbol=function(t,e,n){this._innerAPI().changeSymbol(t,e+"",n)},t.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)},t.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},t.prototype.selectLineTool=function(t){this._innerAPI().selectLineTool(t)},t.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},t.prototype.save=function(t){this._innerAPI().saveChart(t)},t.prototype.load=function(t,e){this._innerAPI().loadChart({json:t,extendedData:e})},t.prototype.getSavedCharts=function(t){this._innerAPI().getSavedCharts(t)},t.prototype.loadChartFromServer=function(t){this._innerAPI().loadChartFromServer(t)},t.prototype.saveChartToServer=function(t,e,n){this._innerAPI().saveChartToServer(t,e,n)},t.prototype.removeChartFromServer=function(t,e){this._innerAPI().removeChartFromServer(t,e)},t.prototype.onContextMenu=function(t){this._innerAPI().onContextMenu(t)},t.prototype.createButton=function(t){return this._innerWindow().createButton(t)},t.prototype.showNoticeDialog=function(t){this._innerAPI().showNoticeDialog(t)},t.prototype.showConfirmDialog=function(t){this._innerAPI().showConfirmDialog(t)},t.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},t.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},t.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},t.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},t.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},t.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},t.prototype.addCustomCSSFile=function(t){this._innerWindow().addCustomCSSFile(t)},t.prototype.applyOverrides=function(t){this._options=n(this._options,{overrides:t}),this._innerWindow().applyOverrides(t)},t.prototype.applyStudiesOverrides=function(t){this._innerWindow().applyStudiesOverrides(t)},t.prototype.watchList=function(){return this._innerAPI().watchlist()},t.prototype.activeChart=function(){return this._innerAPI().activeChart()},t.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},t.prototype.layout=function(){return this._innerAPI().layout()},t.prototype.setLayout=function(t){this._innerAPI().setLayout(t)},t.prototype.layoutName=function(){return this._innerAPI().layoutName()},t.prototype.changeTheme=function(t){this._innerWindow().changeTheme(t)},t.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},t.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},t.prototype.hideAllDrawingTools=function(){return this._innerAPI().hideAllDrawingTools()},t.prototype.magnetEnabled=function(){return this._innerAPI().magnetEnabled()},t.prototype.magnetMode=function(){return this._innerAPI().magnetMode()},t.prototype.undoRedoState=function(){return this._innerAPI().undoRedoState()},t.prototype._innerAPI=function(){return this._innerWindow().tradingViewApi},t.prototype._innerWindow=function(){return this._iFrame.contentWindow},t.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")},t.prototype._create=function(){var t=this,e=this._render(),n=document.getElementById(this._options.container_id);if(null===n)throw new Error("There is no such element - #"+this._options.container_id);n.innerHTML=e,this._iFrame=n.querySelector("#"+this._id);var o=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(o.style.width="100%",this._options.fullscreen||(o.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise((function(t){var e=function(){o.removeEventListener("load",e,!1),t()};o.addEventListener("load",e,!1)})),this._innerWindowLoaded.then((function(){t._innerWindow().widgetReady((function(){t._ready=!0;for(var e=0,n=t._readyHandlers;e<n.length;e++){var o=n[e];try{o.call(t)}catch(t){console.error(t)}}t._innerWindow().initializationFinished()}))}))},t.prototype._render=function(){var t=window;t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter},this._options.saved_data&&(t[this._id].chartContent={json:this._options.saved_data});var e=(this._options.library_path||"")+"static/"+encodeURIComponent(this._options.locale)+"-tv-chart.c63b141fec55a3c31066.html#symbol="+encodeURIComponent(this._options.symbol)+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+e+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},t}();window.TradingView=window.TradingView||{},window.TradingView.version=s,t.version=s,t.widget=r,Object.defineProperty(t,"__esModule",{value:!0})}))},a882:function(t,e,n){"use strict";n("5da7")}}]);