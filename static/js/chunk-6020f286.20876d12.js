(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6020f286"],{"0693":function(t,e,s){},"0d32":function(t,e,s){"use strict";s.r(e);var n,a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t.tokenInfo.id?[s("HeaderBox",{attrs:{"token-info":t.tokenInfo}}),s("div",{staticClass:"infoBox"},[s("div",{staticClass:"itemBox"},[s("div",{staticClass:"item item1"},[s("span",{staticClass:"label"},[t._v("Total Liquidity")]),s("span",{staticClass:"value"},[t._v("$"+t._s(t._f("toThousandFilter")(t._f("autoFixed")(111111))))])]),s("div",{staticClass:"item item2"},[s("span",{staticClass:"label"},[t._v("Volume (24hrs)")]),s("span",{staticClass:"value"},[t._v("$"+t._s(t._f("toThousandFilter")(t._f("autoFixed")(t.tokenInfo.volume_24hour))))])]),s("div",{staticClass:"item item3"},[s("span",{staticClass:"label"},[t._v("Transactions (24hrs)")]),s("span",{staticClass:"value"},[t._v("$"+t._s(t._f("toThousandFilter")(t._f("autoFixed")(t.tokenInfo.transactions_24hours))))])])]),s("div",{staticClass:"chart"},[s("NewChart")],1)])]:[s("Loading")]],2)},i=[],o=s("60b5"),r=s("6abc"),l=s("7dd6"),c=(s("2eeb"),s("6a61"),s("52c1")),u=s("b40e"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-table",{directives:[{name:"el-table-infinite-scroll",rawName:"v-el-table-infinite-scroll",value:t.onPageLoad,expression:"onPageLoad"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:t.pageList,"empty-text":t.$t("common.noData"),height:t.tableHeight}},[s("el-table-column",{attrs:{label:"Name",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row,a=e.$index;return[s("a",{staticClass:"name",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.$router.push({name:"pair",params:{address:n.pair,platform:t.platformInfo.key}})}}},[s("span",{staticClass:"index"},[t._v(t._s(a+1))]),s("div",{staticClass:"imgBox"},[s("el-image",{staticClass:"img img1",attrs:{src:t.$utils.getTokenLogo(n.token1)}},[s("div",{staticClass:"img-err",attrs:{slot:"error"},slot:"error"},[s("img",{staticClass:"img",attrs:{src:t.$utils.tokenLogoErrImg}})])]),s("el-image",{staticClass:"img img2",attrs:{src:t.$utils.getTokenLogo(n.token2)}},[s("div",{staticClass:"img-err",attrs:{slot:"error"},slot:"error"},[s("img",{staticClass:"img",attrs:{src:t.$utils.tokenLogoErrImg}})])])],1),s("span",{staticClass:"pairs"},[t._v(t._s(t._f("maxStrLen")(n.token1_symbol))+"-"+t._s(t._f("maxStrLen")(n.token2_symbol)))])])]}}])}),s("el-table-column",{attrs:{label:"Liquidity Amount",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t._v(" "+t._s(t._f("autoFixed")(s.liquidity1))+" "+t._s(t._f("maxStrLen")(s.token1_symbol))+" ")]}}])}),s("el-table-column",{attrs:{label:"Liquidity Amount",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t._v(" "+t._s(t._f("autoFixed")(s.liquidity2))+" "+t._s(t._f("maxStrLen")(s.token2_symbol))+" ")]}}])}),s("div",{staticStyle:{"text-align":"center"},attrs:{slot:"append"},slot:"append"},[t.loading||0===t.pageList.length?s("Loading"):t._e()],1)],1)},f=[],h=(s("77ad"),s("781b")),m={components:{Loading:h["a"]},props:{},data:function(){return{page:0,page_size:20,loading:!0,list:[],tableHeight:300}},computed:Object(r["a"])(Object(r["a"])({},Object(c["b"])(["account","platformInfo","isPc"])),{},{pageList:function(){return this.list.slice(0,this.page_size*this.page)}}),watch:{pageList:function(t){this.loading=!(this.page_size*this.page>t.length)}},created:function(){this.getData()},mounted:function(){},methods:{getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var s,n,a,i,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.$route.params.address,e.next=3,t.$api.getTokenPairs(s);case 3:n=e.sent,a=n.data,i=a.list,o=a.tokens,l=i.map((function(t){var e=Object(r["a"])(Object(r["a"])({},t),{},{token1_symbol:o[t.token1].symbol,token2_symbol:o[t.token2].symbol});return e})),t.list=l,console.log(l,"res toppairs"),console.log(o,"tokens");case 9:case"end":return e.stop()}}),e)})))()},onPageLoad:function(){this.loading&&(this.page++,console.log(this.page,"this.page"))}}},p=m,b=(s("4bbd"),s("5d22")),g=Object(b["a"])(p,d,f,!1,null,"36872c00",null),v=g.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-table",{directives:[{name:"el-table-infinite-scroll",rawName:"v-el-table-infinite-scroll",value:t.onPageLoad,expression:"onPageLoad"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:t.list,"empty-text":t.$t("common.noData"),height:t.tableHeight}},[s("el-table-column",{attrs:{width:"220"},scopedSlots:t._u([{key:"header",fn:function(){return[s("ul",{staticClass:"tableSelectTypeList"},t._l(t.tableSelectTypeList,(function(e){return s("li",{key:e.value,class:{on:e.value===t.tableSelectType},on:{click:function(s){return t.onChangeTransaction(e.value)}}},[t._v(t._s(e.label))])})),0)]},proxy:!0},{key:"default",fn:function(e){var n=e.row;return[s("a",{staticClass:"name",attrs:{href:t.$utils.getTxLink(n.transaction_hash),target:"_blank"}},[1===n.type||2===n.type?[s("span",{staticClass:"swapText"},[t._v(t._s("Swap "+t.$utils.maxStrLen(n.token1_symbol)+" for "+t.$utils.maxStrLen(n.token2_symbol)))])]:3===n.type?[t._v(t._s("Add "+t.$utils.maxStrLen(n.token1_symbol)+" and "+t.$utils.maxStrLen(n.token2_symbol)))]:4===n.type?[t._v(t._s("Remove "+t.$utils.maxStrLen(n.token1_symbol)+" and "+t.$utils.maxStrLen(n.token2_symbol)))]:t._e()],2)]}}])}),s("el-table-column",{attrs:{label:"Type",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[1===n.type?s("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v("Buy")]):2===n.type?s("el-tag",{attrs:{type:"danger",effect:"dark"}},[t._v("Sell")]):3===n.type?s("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v("Add")]):4===n.type?s("el-tag",{attrs:{type:"danger",effect:"dark"}},[t._v("Remove")]):t._e()]}}])}),s("el-table-column",{attrs:{label:"Total Value",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t._v(" $"+t._s(t._f("autoFixed")(s.price*s.amount1))+" ")]}}])}),s("el-table-column",{attrs:{align:"center",label:"Token Amount"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(t._f("autoFixed")(n.amount1))+" "),s("a",{attrs:{href:"/defi/token?address=",target:"_blank"}},[t._v(t._s(t._f("maxStrLen")(n.token1_symbol)))])]}}])}),s("el-table-column",{attrs:{label:"Token Amount",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(t._f("autoFixed")(n.amount2))+" "),s("a",{attrs:{href:"/defi/token?address=",target:"_blank"}},[t._v(t._s(t._f("maxStrLen")(n.token2_symbol)))])]}}])}),s("el-table-column",{attrs:{align:"center",label:"Account"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[s("a",{attrs:{href:t.$utils.getAddressLink(n.from),target:"_blank"}},[t._v(" "+t._s(t._f("miniAddress")(n.from)))])]}}])}),s("el-table-column",{attrs:{align:"center",label:"Time"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[t._v(" "+t._s(t._f("formatTime")(s.timestamp))+" ")]}}])}),s("div",{staticStyle:{"text-align":"center"},attrs:{slot:"append"},slot:"append"},[t.loading?s("Loading"):t._e()],1)],1)},_=[],y={components:{Loading:h["a"]},props:{},data:function(){return{address:"",page:1,page_size:10,loading:!0,tableSelectType:0,tableSelectTypeList:[{value:0,label:"All"},{value:1,label:"Swap"},{value:3,label:"Add"},{value:4,label:"Remove"}],list:[],tableHeight:600}},computed:Object(r["a"])({},Object(c["b"])(["isPc"])),watch:{},created:function(){var t=this.$route.params.address;this.address=t,this.getData()},mounted:function(){},methods:{onChangeTransaction:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e.tableSelectType=t,e.$forceUpdate(),console.log("type",t),e.getData();case 4:case"end":return s.stop()}}),s)})))()},getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var s,n,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,t.list=[],e.next=4,t.$api.getTokenSwapList({address:t.address,type:t.tableSelectType,page_size:100});case 4:s=e.sent,n=s.data,a=n.list,i=n.tokens,o=n.pairs,t.list=a.map((function(t){var e=o[t.pair_id].token1,s=o[t.pair_id].token2,n=Object(r["a"])(Object(r["a"])({},t),{},{token1_symbol:i[e].symbol,token2_symbol:i[s].symbol});return n})),t.loading=!1,console.log(t.list,"this.list");case 9:case"end":return e.stop()}}),e)})))()},onPageLoad:function(){console.log("onPageLoad")}}},w=y,C=(s("86ee"),Object(b["a"])(w,k,_,!1,null,"208ad9a2",null)),S=C.exports,x=s("30c0"),L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"headerBox"},[s("p",{staticClass:"tokens"},[s("span",[t._v("Tokens")]),s("span",[t._v(" → ")]),s("span",{staticClass:"symbol"},[t._v(t._s(t.tokenInfo.symbol))]),s("span",{staticClass:"address"},[t._v("("+t._s(t._f("autoAddress")(t.tokenInfo.address))+")")])]),s("h1",[s("el-image",{staticClass:"img",attrs:{src:t.$utils.getTokenLogo(t.tokenInfo.address)}},[s("div",{staticClass:"img-err",attrs:{slot:"error"},slot:"error"},[s("img",{staticClass:"img",attrs:{src:t.$utils.tokenLogoErrImg}})])]),s("span",[t._v(t._s(t.tokenInfo.name)+" ("+t._s(t.tokenInfo.symbol)+") ")]),s("span",{staticClass:"price"},[t._v("$"+t._s(111.11))]),s("span",{staticClass:"rate"},[t._v("-0.53%")])],1),s("div",{staticClass:"btnBox"},[s("a",{attrs:{href:t.$utils.getAddLiquidityLink(t.tokenInfo.address),target:"_blank"}},[s("el-button",{staticClass:"btn btn1",attrs:{type:"primary",icon:"el-icon-plus",plain:"",size:"mini"}},[t._v("Add Liquidity")])],1),s("a",{attrs:{href:t.$utils.getTradeLink(t.tokenInfo.address),target:"_blank"}},[s("el-button",{staticClass:"btn btn2",attrs:{type:"primary",size:"mini"}},[t._v("Trade")])],1)])])},T=[],O={components:{},props:{tokenInfo:{type:Object,require:!0}},data:function(){return{}},mounted:function(){},methods:{}},$=O,j=(s("6625"),Object(b["a"])($,L,T,!1,null,"cfefbcc8",null)),D=j.exports,I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{staticClass:"information",attrs:{gutter:10,justify:"center"}},[s("el-col",{attrs:{xs:12,span:4}},[s("div",{staticClass:"info"},[s("span",{staticClass:"label"},[t._v("Tokens")]),s("span",{staticClass:"value"},[t._v(t._s(t.tokenInfo.symbol)+" ")])])]),s("el-col",{attrs:{xs:12,span:4}},[s("div",{staticClass:"info"},[s("span",{staticClass:"label"},[t._v("Name")]),s("span",{staticClass:"value"},[t._v(t._s(t.tokenInfo.name))])])]),s("el-col",{attrs:{xs:12,span:4}},[s("div",{staticClass:"info"},[s("span",{staticClass:"label"},[t._v("Address")]),s("span",{staticClass:"value"},[s("a",{attrs:{href:t.$utils.getAddressLink(t.tokenInfo.address),target:"_blank"}},[t._v(" "+t._s(t._f("miniAddress")(t.tokenInfo.address)))]),s("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.tokenInfo.address,expression:"tokenInfo.address",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopySuccess,expression:"onCopySuccess",arg:"success"}],staticStyle:{padding:"0"},attrs:{type:"text"}},[s("svg-icon",{staticClass:"copy",attrs:{"icon-class":"copy"}})],1)],1)])]),s("el-col",{staticClass:"btnBox",attrs:{xs:12,span:12,align:"right"}},[s("a",{attrs:{href:t.$utils.getAddressLink(t.tokenInfo.address),target:"_blank"}},[s("el-button",{attrs:{type:"primary",size:"large"}},[t._v("View on BlockScan")])],1)])],1)},R=[],E={components:{},props:{tokenInfo:{type:Object,require:!0}},inject:["onCopySuccess"],data:function(){return{}},mounted:function(){},methods:{}},P=E,W=(s("6432"),Object(b["a"])(P,I,R,!1,null,"ef732906",null)),N=W.exports,A=s("29e9"),B=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},z=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{className:"kline"}},[s("div",{attrs:{id:"tv_chart_container"}})])}],F=(s("e18c"),s("053b"),s("b4fb"),s("8943")),q=s("303e"),J=s("acf6"),H=s("a0b3"),M=s("8e39"),K=s.n(M),V=s("bf62"),U=function(){function t(){Object(q["a"])(this,t),Object(l["a"])(this,"url","wss://api.huobi.pro/ws"),Object(l["a"])(this,"ws",null),Object(l["a"])(this,"success",{}),Object(l["a"])(this,"failure",{}),Object(l["a"])(this,"timer",null),Object(l["a"])(this,"evt",new V["EventEmitter"])}return Object(J["a"])(t,[{key:"initWebSocket",value:function(){this.ws=new WebSocket(this.url),this.ws.binaryType="arraybuffer",this.ws.onopen=this.onopen.bind(this),this.ws.onclose=this.onclose.bind(this),this.ws.onerror=this.onerror.bind(this),this.ws.onmessage=this.onmessage.bind(this),console.log(" >> WebSocket init :",this.url)}},{key:"onopen",value:function(){if(this.ws){if(console.log(" >> WebSocket open..."),this.timer)for(var t in clearInterval(this.timer),this.timer=null,this.success)this.ws.send(this.success[t]),console.log(" >> WebSocket send: ".concat(this.success[t]));for(var e in this.failure)this.success[e]||(this.ws.send(this.failure[e]),this.success[e]=this.failure[e],console.log(" >> WebSocket send: ".concat(this.failure[e])));this.failure={}}}},{key:"onclose",value:function(){this.ws=null,console.log(" >> Websocket Close..."),this.timer||this.onReconnection()}},{key:"onerror",value:function(t){console.log(" >> Websocket Error...",t)}},{key:"onmessage",value:function(t){if(t.data){var e,s=H["a"].inflate(t.data,{to:"string"}),n=JSON.parse(s);if(n&&n.ping)null===(e=this.ws)||void 0===e||e.send(JSON.stringify({pong:Date.now()}));else this.onBroadcast(n)}}},{key:"onBroadcast",value:function(t){this.success[t.ch]&&this.evt.emit(t.ch,t)}},{key:"subscribe",value:function(t,e,s){var n,a=this;return n=this.ws&&this.ws.readyState===WebSocket.OPEN?this.successPush(t,e,s):this.failurePush(t,e,s),{remove:function(){a.unsubscribe(t),n.removeAllListeners(t)}}}},{key:"unsubscribe",value:function(t){if(this.failure[t]&&delete this.failure[t],this.success[t])if(this.ws){var e=JSON.parse(this.success[t]);e.cmd="unsub",this.ws.send(JSON.stringify(e)),this.evt.removeAllListeners(t),console.log(" >> WebSocket send: ".concat(JSON.stringify(e))),delete this.success[t]}else delete this.success[t]}},{key:"successPush",value:function(t,e,s){var n;return this.success[t]=JSON.stringify(e),null===(n=this.ws)||void 0===n||n.send(this.success[t]),console.log(" >> WebSocket send: ".concat(this.success[t])),this.evt.on(t,s)}},{key:"failurePush",value:function(t,e,s){return this.failure[t]=JSON.stringify(e),console.log(" >> WebSocket 准备订阅: ".concat(this.failure[t])),this.evt.on(t,s)}},{key:"onReconnection",value:function(){var t=this;this.url&&(this.initWebSocket(),this.timer=setInterval((function(){t.initWebSocket();var e=K()().format("YYYY-MM-DD HH:mm:ss");console.log(" >> [".concat(e,"] WebSocket Reconnect...."))}),3e3))}}]),t}(),Y=new U,G=["1","5","15","30","60","240","D","W","M"],Q={"1min":"1","5min":"5","15min":"15","30min":"30","60min":"60","4hour":"240","1day":"D","1week":"W","1mon":"M"},X={components:{},data:function(){var t=this;return{symbol:"btcusdt",interval:"5min",widget:null,datafeed:new F["DataFeed"]({getBars:function(e){return t.getBars(e)},fetchResolveSymbol:function(){return t.resolveSymbol()},fetchConfiguration:function(){return new Promise((function(t){t({supported_resolutions:G})}))}})}},computed:Object(r["a"])({},Object(c["b"])(["isConnect","account","isPc","language","platformInfo"])),created:function(){},mounted:function(){this.initTradingView()},methods:{resolveSymbol:function(){var t=this;return new Promise((function(e){var s=t.symbol;console.log(s,"symbolsymbolsymbol"),e({name:s.toLocaleUpperCase(),full_name:s.toLocaleUpperCase(),description:s.toLocaleUpperCase(),type:s,session:"24x7",exchange:t.platformInfo.name,listed_exchange:s,timezone:"Asia/Shanghai",format:"price",pricescale:Math.pow(10,4),minmov:1,volume_precision:8,has_intraday:!0,supported_resolutions:G})}))},getBars:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var n,a,i,o,r,l,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(console.log(t,"params1111"),n=e.symbol,a=window.innerWidth,t.firstDataRequest){s.next=5;break}return s.abrupt("return",{bars:[],meta:{noData:!0}});case 5:if(t.resolution!==Q[e.interval])for(i in e.unsubscribeKLine(),Q)Q[i]===t.resolution&&(e.interval=i);return s.next=8,e.$ajax({url:"https://api.huobi.pro/market/history/kline",method:"get",data:{symbol:n,period:e.interval,size:a>2e3?2e3:a}});case 8:if(o=s.sent,t.resolution===Q[e.interval]&&t.firstDataRequest&&o&&o.data.length&&e.subscribeKLine(),o&&o.data&&o.data.length){s.next=12;break}return s.abrupt("return",{bars:[],meta:{noData:!0}});case 12:for(r=[],l=0;l<o.data.length;l++)c=o.data[l],r.push({time:1e3*c.id,open:c.open,high:c.high,low:c.low,close:c.close,volume:c.vol});return r.sort((function(t,e){return t.time>e.time?1:-1})),console.log({bars:r,meta:{noData:!r.length}}),s.abrupt("return",{bars:r,meta:{noData:!r.length}});case 17:case"end":return s.stop()}}),s)})))()},subscribeKLine:function(){var t=this,e=this.symbol;Y.subscribe("market.".concat(e,".kline.").concat(this.interval),{id:"react-tv",sub:"market.".concat(e,".kline.").concat(this.interval)},(function(e){var s=e.tick;t.datafeed.updateKLine({time:1e3*s.id,open:s.open,high:s.high,low:s.low,close:s.close,volume:s.vol})}))},unsubscribeKLine:function(){var t=this.symbol;Y.unsubscribe("market.".concat(t,".kline.").concat(this.interval))},initTradingView:function(){var t=this.symbol;this.widget=new F["widget"]({symbol:t.toLocaleUpperCase(),interval:Q[this.interval],container_id:"tv_chart_container",datafeed:this.datafeed,library_path:"/charting_library/",locale:"zh",theme:"Dark",timezone:"Asia/Shanghai"})}}},Z=X,tt=(s("43a9"),Object(b["a"])(Z,B,z,!1,null,null,null)),et=tt.exports,st="token",nt={name:st,components:(n={NewChart:et,Loading:h["a"],SectionTitle:A["a"],HeaderBox:D,TopPairs:v,Transactions:S,Chart:x["a"]},Object(l["a"])(n,"NewChart",et),Object(l["a"])(n,"TokenInformation",N),n),inject:["onCopySuccess"],data:function(){return{ws:null,address:"",tokenInfo:{},timeRangeList:{},klineTimeType:"1day",lineChartData:[],price:""}},computed:Object(r["a"])({},Object(c["b"])(["isPc"])),watch:{klineTimeType:function(t,e){this.ws&&(this.wsSend({unsub:"market.kline.".concat(e),address:this.address}),this.wsSend(this.getKlineReqParams()),this.wsSend({sub:"market.kline.".concat(t),address:this.address}))}},activated:function(){console.log("token activated"),this.ws&&this.wsSend({sub:"market.kline.".concat(this.timeRangeList[this.klineTimeType].value),address:this.address})},deactivated:function(){console.log("token deactivated"),this.ws&&this.wsSend({unsub:"market.kline.".concat(this.timeRangeList[this.klineTimeType].value),address:this.address})},beforeDestroy:function(){this.ws&&this.ws.close()},created:function(){var t=this.$route.params.address;this.address=t,this.timeRangeList=u["c"]},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.onConnectWebSocket(),e.next=3,t.$api.getTokenInfo(t.address);case 3:s=e.sent,n=s.data,t.tokenInfo=n;case 6:case"end":return e.stop()}}),e)})))()},methods:{handleChartData:function(t){return{open:+t.open,close:+t.close,low:+t.low,high:+t.high,time:t.id}},wsSend:function(t){console.log(t),this.ws.send(JSON.stringify(t))},getKlineReqParams:function(){return{req:"market.kline.".concat(this.timeRangeList[this.klineTimeType].value),address:this.address,from:Math.round((new Date).getTime()/1e3)-60*this.timeRangeList[this.klineTimeType].time,to:Math.round((new Date).getTime()/1e3)}},onConnectWebSocket:function(){var t=this;console.log("onConnectWebSocket"),this.ws=new WebSocket(this.$utils.getWsUrl()),this.ws.onopen=function(){t.wsSend(t.getKlineReqParams()),t.wsSend({sub:"market.kline.".concat(t.timeRangeList[t.klineTimeType].value),address:t.address})},this.ws.onmessage=function(e){var s=JSON.parse(e.data);if(console.log("clg",s),s.msg==="market.kline.".concat(t.timeRangeList[t.klineTimeType].value)){var n=s.data.map((function(e,n){return t.handleChartData(Object(r["a"])(Object(r["a"])({},e),{},{open:0===n?e.open:s.data[n-1].close}))}));t.lineChartData=n,t.$refs.Chart.init({chartData:n})}else if(s.ch){var a=t.handleChartData(Object(r["a"])(Object(r["a"])({},s.tick),{},{open:0===t.lineChartData.length?s.tick.open:t.lineChartData[t.lineChartData.length-1].close}));t.lineChartData.push(a),t.$refs.Chart.update(a)}},this.ws.onclose=function(){console.log("token ws closed")}}}},at=nt,it=(s("6c17"),Object(b["a"])(at,a,i,!1,null,"4b92fffd",null));e["default"]=it.exports},"11ba":function(t,e,s){},"1e40":function(t,e,s){},"23ef":function(t,e,s){"use strict";s("4ee53")},"27d3":function(t,e,s){"use strict";s("11ba")},"29e9":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",[s("span",[t._v(t._s(t.title))])])},a=[],i={props:{title:{type:String,default:""}}},o=i,r=(s("65fa"),s("5d22")),l=Object(r["a"])(o,n,a,!1,null,"1727a15b",null);e["a"]=l.exports},"2b56":function(t,e,s){},"30c0":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chartBox"},[s("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"chart"}})])}],i=(s("b4fb"),s("dac0")),o={data:function(){return{series:null,chartExample:null,isInit:!1}},mounted:function(){},methods:{update:function(t){this.series.update(t)},set:function(t){console.log("set",t),this.series.setData(t)},init:function(t){var e=this,s=t.chartData,n=void 0===s?[]:s;if(console.log("chartDatachartDatachartDatachartData",n),this.isInit)return console.log("setData"),void this.series.setData(JSON.parse(JSON.stringify(n)));var a,o=document.getElementById("chart"),r=document.createElement("div");o.appendChild(r),this.chartExample=Object(i["a"])(r,{rightPriceScale:{visible:!0},leftPriceScale:{visible:!1},timeScale:{borderVisible:!0,timeVisible:!0,visible:!0},layout:{backgroundColor:"#23232F",textColor:"rgba(255, 255, 255, 0.5)"},grid:{horzLines:{color:"rgba(255, 255, 255, 0.05)",visible:!0},vertLines:{color:"#f99",visible:!1}},crosshair:{vertLine:{labelVisible:!0}}}),this.chartExample.resize(o.offsetWidth,o.offsetHeight),document.body.onresize=function(){a&&clearTimeout(a),a=setTimeout((function(){e.chartExample.resize(o.offsetWidth,o.offsetHeight)}),100)};var l=this.chartExample.addCandlestickSeries({upColor:"#4AB167",borderUpColor:"#4AB167",downColor:"#FF4248",borderDownColor:"#FF4248"});l.setData(JSON.parse(JSON.stringify(n)));var c=80,u=80,d=15,f=document.createElement("div");f.className="floating-tooltip-2",r.appendChild(f),this.isInit=!0,this.series=l,this.chartExample.subscribeCrosshairMove((function(t){if(void 0===t.point||!t.time||t.point.x<0||t.point.x>r.clientWidth||t.point.y<0||t.point.y>r.clientHeight)f.style.display="none";else{f.style.display="block";var s=t.seriesPrices.get(l);f.innerHTML='\n            <div style="font-size: 14px;line-height: 22px;">\n              <p>'.concat(e.$t("common.high"),":").concat(s.high,"</p>\n              <p>").concat(e.$t("common.low"),":").concat(s.low,"</p>\n              <p>").concat(e.$t("common.open"),":").concat(s.open,"</p>\n              <p>").concat(e.$t("common.close"),":").concat(s.close,"</p>\n            </div>\n          ");var n=l.priceToCoordinate(s),a=t.point.x-50;if(null===n)return;a=Math.max(0,Math.min(r.clientWidth-c,a));var i=n-u-d>0?n-u-d:Math.max(0,Math.min(r.clientHeight-u-d,n+d));f.style.left=a+"px",f.style.top=i+"px"}}))}}},r=o,l=(s("23ef"),s("5d22")),c=Object(l["a"])(r,n,a,!1,null,null,null);e["a"]=c.exports},"3b1e":function(t,e,s){},"43a9":function(t,e,s){"use strict";s("d737")},"4bbd":function(t,e,s){"use strict";s("2b56")},"4e8c":function(t,e,s){},"4ee53":function(t,e,s){},6432:function(t,e,s){"use strict";s("1e40")},"65fa":function(t,e,s){"use strict";s("0693")},6625:function(t,e,s){"use strict";s("3b1e")},"6c17":function(t,e,s){"use strict";s("4e8c")},"781b":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loadingBox"},[s("div",{staticClass:"loading"},[s("div"),s("div"),s("div"),s("div")])])}],i=s("6abc"),o=s("52c1"),r={components:{},data:function(){return{}},computed:Object(i["a"])({},Object(o["b"])(["isConnect","account","isPc","language"])),created:function(){},mounted:function(){},methods:{}},l=r,c=(s("27d3"),s("5d22")),u=Object(c["a"])(l,n,a,!1,null,"298ae9f9",null);e["a"]=u.exports},"86ee":function(t,e,s){"use strict";s("a031")},a031:function(t,e,s){},d737:function(t,e,s){}}]);